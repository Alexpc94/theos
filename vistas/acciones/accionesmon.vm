	<!-- BOOTSTRAP STYLES-->
    <link href="css/bootstrap.css" rel="stylesheet" />
    
     <!-- TABLE STYLES-->
    <link href="js/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
   
     <!-- DATA TABLE SCRIPTS -->
    <script src="js/dataTables/jquery.dataTables.js"></script>

    <script src="js/dataTables/dataTables.bootstrap.js"></script>

    <link href="css/estilo1.css" rel="stylesheet">
 
   <link rel="stylesheet" href="js/jquery-ui-themes-1.12.0/themes/base/jquery-ui.css">
   <script src="js/jquery-ui-1.12.0/jquery-ui.js"></script>

  <script src="js/tools_oam.js"></script>
    
    <script src="js/bootstrap-notify/bootstrap-notify.js"></script>
    <link href="css/myNotify.css" rel="stylesheet">
    <script src="js/myNotify.js"></script>
    
  <script>
      $( function() {
          $( "#a_fecha" ).datepicker({
            changeMonth: true,
            changeYear: true
          });
    
          $( "#m_fecha" ).datepicker({
              changeMonth: true,
              changeYear: true
          });    
          
      });
  </script>
    
           <!-- /. ROW  -->              
            <div  class="row">
                 <!-- aqui tamaño de tablas  -->               
                <div class="col-md-12">
                    <!-- Advanced Tables -->
                    <div  class="panel panel-default">
                        <div class="panel-heading">
                            <div class="div-cabeza">
                                <div class="div-logo-titulo">
                                    <img src="images/img-sis/cand1.png">
                                    <p class="titulo-gestiones"  id="titulo-pantalla">Gestión Acciones de Socios</p>     
                                </div>                                
                                <fieldset class="col-md-12" >        
	                                    <legend>Parámetros::</legend>
	                                    #if (${PA}=="A")
                                       		<a  href="javascript:void(0)" onclick="javascript:adicionarAccion()">                               			
			                                    <button class="pull-right" data-toggle="modal" id="#myModal">
			                                        <img src="images/img-sis/add_2.png" style="width:30px; height:30px;">
			                                    </button>
		                                    </a>
	                                    #else
		                                    <button class="pull-right" data-toggle="modal">
		                                        <img src="images/img-sis/noadd_2.png" style="width:30px; height:30px;">
		                                    </button>
	                                	#end

	                                    <!-- BOTON TO PRINT 
	                                    <button class="pull-right" id="print">
	                                        <img src="images/img-sis/print.png" style="width:30px; height:30px;">
	                                    </button>
	                                	-->
	                                   
	                                <form id="paramform" action="Tcambiomon.html" method="POST">  

									    <div class="col-md-4 par-activos pull-right">
	                                    	<label><input type="radio" name="estado" value="1" class="paramsChange" #if($estado== 1) checked #end>Activos</label>
									      	<label><input type="radio" name="estado" value="0" class="paramsChange" #if($estado== 0) checked #end>Nulos</label>
									      	<label><input type="radio" name="estado" value="2" class="paramsChange" #if($estado== 2) checked #end>Todos</label>
									    </div>
	                                    <div class="col-md-4 par-activos pull-right">
	                                    	<label><input type="radio" name="saldo" value="1" class="paramsChange" #if($saldo== 1) checked #end>CON SALDO</label>
									      	<label><input type="radio" name="saldo" value="0" class="paramsChange" #if($saldo== 0) checked #end>SIN SALDOS</label>
									      	<label><input type="radio" name="saldo" value="2" class="paramsChange" #if($saldo== 2) checked #end>TODOS</label>
									    </div>
									</form>    
                                </fieldset>                                                               
                            </div>
                        </div>
                        <div >
                            <div class="espacio-small"></div>
                            <div class="table-responsive">
 <div id="listacciones-det">
                                <table  class="table table-striped table-bordered table-hover" id="dataTables-example">
                                    <thead>
                                        <tr>
                                            <th class="text-center ancho-icono">#</th>
                                            <th width="5" > &nbsp; </th>
                                            <th class="col-sm-0 text-center">Código.</th>
                                            <th class="col-sm-0">Fecha</th>
                                            <th class="col-sm-0">Acción.</th>
                                            <th class="col-sm-0">SOCIO</th>
                                            <th class="col-sm-0">Estado</th>
                                            <th class="col-sm-0" title="MONTO definido..">Monto</th>
                                            <th class="col-sm-0" title="MONTO calculado por Promoción..">Mon.Cal.</th>
                                            <th class="col-sm-0" title="SALDO a pagar..">Saldo</th>
                                            <th class="col-sm-0" title="ESTADO de la Accion">EST</th>
                                            <th class="col-sm-0" title="ELIMINAR Acción">DEL</th>
                                            <th class="col-sm-0 text-center">PR</th>
                                        </tr>
                                    </thead>
                                    <tbody>     
                                    	#set($con=1)
                                    	#foreach($reg in $xAcciones)	                                   
                                         <tr class="gradeU">
                                            <td class="text-center">${con}</td>
        							        <td class="text-center">
	    							        	<a  href="javascript:void(0)" onclick="javascript:llamarDetalleAccion('${reg.coda}','${reg.getDatosPersona()}')">
	    	                                		<input type="radio" name="beneficiario_sel" />
	    	                                	</a>
	    							        </td>
                                            <td>${reg.coda} </td>
                                            <td>${reg.getFechaFormat()} </td>
                                            <td><b>${reg.nro}</b></td>
                                            <td>${reg.getDatosPersona()} </td>
                                            <td> ${reg.getEstadosocio()} </td>
                                            <td align="right">${reg.getMontoFormat()} </td>
                                            <td align="right">${reg.getMontotalFormat()} </td>
                                            <td align="right">${reg.getSaldoFormat()} </td>
                                            
                                            <td class="text-center ancho-icono">
                                            	#if (${reg.estado}==1)
                                            		<img src="images/img-sis/hand_up.png" id="btn-modificar" style="width:25px;">
                                            	#else	
                                            		<img src="images/img-sis/hand_down.png" style="width:25px;">
                                            	#end
                                            </td>                                           		
                                            <td class="text-center ancho-icono">
                                            #if (${reg.estado}==1)
                                            	#if (${PB}=="B")
                                            		#if (${reg.montotal}==${reg.saldo})
		                                            	<a  href="javascript:void(0)" onclick="javascript:eliminarAcciones('${reg.coda}','${reg.nro}','${reg.getDatosPersona()}','${reg.getMontoFormat()}','${reg.getSaldoFormat()}')">
		                                            		<img src="images/img-sis/del.png" style="width:25px;" title="Eliminar Acción..">
		                                            	</a>
		                                            #else
		                                            	<img src="images/img-sis/nodel.png" style="width:25px;" title="LA ACCION TIENE PAGOS....">
		                                            #end
                                            	#else
		                                			<img src="images/img-sis/nodel.png" style="width:25px;" title="SIN PRIVILEGIOS..">
		                                		#end
		                                    #else
	                                					<img src="images/img-sis/nodel.png" style="width:25px;" >
	                                		#end     	
                                            </td>
	    									<td  class="text-center ancho-icono">
										        <a href="javascript:void(0);" onclick="window.open('reportePagarBoletas102102.html?opcion=${opReporte}&codpag=${reg.getCodpagEncript()}','win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=825,height=550,directories=no,location=no');" >
				            						<img src="images/img-sis/print.png"
				            							style="vertical-align: middle; width: 24px; height: 24px"
				            							alt="Vista previa" title="Imprimir Factura.." /> 
				    							</a>
										    </td>
                                        </tr>                        
                                        #set($con=$con + 1)
                                       #end
                                    </tbody>
                                </table>
</div>                                                                
                            </div>
                            
                        </div>
                    </div>
                    <!--End Advanced Tables -->
                </div>
                <input type="HIDDEN" id="mensaje" value="${mensaje}">
                <input type="HIDDEN" id="menTexto" value="${menTexto}">
                               
            </div>
<div id="detalle-accion">

</div>

 <!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!--  Modals Adicionar  -->
<div class="panel-body">
    <div class="modal fade" id="myModal-add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
        <br><br><br>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabl">Adicionar Nueva Accion del Socio</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" action="tcambioServices.html" method="POST" id="addform">
                         <div class="form-group">
                            <label class="control-label col-xs-4">
                            <span style="color:red;font-size:18px;">*</span>Fecha Registro::</label>
                            <div class="col-xs-3">
                                <input type="text" class="form-control" name="a_fecha" id="a_fecha" placeholder="dd/mm/aaaa" required>
                            </div>
                        </div>
                        <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Nro. Acción::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_nro" id="a_nro" placeholder="Nro. de Acción.." required>
	                            <input type="HIDDEN" name="a_editado"  id="a_editado">
	                            <input type="HIDDEN" name="a_generado" id="a_generado">
	                            <input type="HIDDEN" name="a_sw" id="a_sw">
	                        </div> 	                        
	                        <div class="col-xs-2">
	                			<label class="radio-inline">
	                				<input class="paramsAccion" type="radio" name="a_eaccion" id="a_1" value="1">Editar
	                			</label>
	                		</div>
	                		<div class="col-xs-2">
	                			<label class="radio-inline">
	                				<input class="paramsAccion" type="radio" name="a_eaccion" id="a_2" value="2" checked>Generador
	                			</label>
	                		</div>
	                    </div>
                        <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Socio:: </label>
	                        <div class="col-xs-8">
	                            <div class="input-group">
	                              	<input type="text" class="form-control" id="a_codper" placeholder="Buscar Socio.." disabled>
	                                <input type="HIDDEN" name="a_codperVal" id="a_codperVal" >
									<span class="input-group-btn">
										<button class="btn btn-default" type="button">
											<a  href="javascript:void(0)"  onclick="javascript:listaSocios('${row}')">
												<img src="images/img-sis/buscar.png" style="width:20px;display: inline-block;">
											</a>
										</button>
									</span>
	                            </div><!-- /input-group -->
	                        </div> 	                        
	                    </div>	                    
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Monto Acción::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_monto" id="a_monto" placeholder="Monto Acción.." required>
	                        </div>	                        
	                    </div>
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Interés::</label>
	                        <div class="col-xs-3">    	                    
	                            <div class="input-group">
	                              	<input type="text" class="form-control" name="a_interes" id="a_interes" placeholder="Interés..">
	                              	<span class="input-group-addon"> % </span>
	                            </div><!-- /input-group -->
	                        </div>    
	                    </div>
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Nro.Cuota::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_nrocuota" id="a_nrocuota" placeholder="Monto Acción.." required>
	                        </div>	                        
	                    </div>
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Cuota::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_cuota" id="a_cuota" placeholder="Monto Acción.." required>
	                        </div>	                        
	                    </div>
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">
	                        <span style="color:red;font-size:18px;">*</span>Monto Total::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_montot" id="a_montotal" placeholder="Monto Acción.." disabled>
	                            <input type="HIDDEN"  name="a_montot" id="a_montot" placeholder="Monto Acción.." >
	                        </div>	                        
	                    </div>	 
			            <div class="form-group">		    			            
			            <label class="control-label col-xs-4"> </label>
		                    <div class="col-xs-3">                               		                    
		                    	<button type="button" class="btn btn-warning" id="generar_costos">Generar Costos</button>
		                    </div> 
	                	</div>
                    	<div class="form-group">
	                    	<label class="control-label col-xs-4">Observ.::</label>
	                    	<div class="col-xs-7">
	                    	 	<textarea class="form-control" rows="2" cols="60" name="a_obser" id="a_obser"></textarea>	                    		                             		
	                       </div>
	                	</div>
<!--	                	
	                	<div class="form-group">
	                        <label class="control-label col-xs-4">Mes Activación::</label>
	                        <div class="col-xs-4">
	                            <select class="form-control" name="a_mesini" id="a_mesini">
		                        	<option value="1">ENERO</option>
		                        	<option value="2">FEBRERO</option>
		                        	<option value="3">MARZO</option>
		                        	<option value="4">ABRIL</option>
		                        	<option value="5">MAYO</option>
		                        	<option value="6">JUNIO</option>
		                        	<option value="7">JULIO</option>
		                        	<option value="8">AGOSTO</option>
		                        	<option value="9">SEPTIEMBRE</option>
		                        	<option value="10">OCTUBRE</option>
		                        	<option value="11">NOVIEMBRE</option>
		                        	<option value="12">DICIEMBRE</option>
								</select>
	                        </div>
	                    </div>
	                    <div class="form-group">
	                        <label class="control-label col-xs-4">Año Activación::</label>
	                        <div class="col-xs-3">
	                            <input type="text" class="form-control" name="a_anioini" id="a_anioini" placeholder="Año inicio.." required>
	                        </div>	                        
	                    </div>	                    
-->	                    
                        <input type="HIDDEN" name="opcion" value="${opAdd}" >
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary boton-add" id="btnAcept_add">Guardar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Modals MYMODAL-->

<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!--  Modals MODIF MODAL-->
<div class="panel-body">
    <div class="modal fade" id="modModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
    
        <br><br><br>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabl">Modificar Tipo de Cambio</h4>
                </div>
                <div class="modal-body">
                     <form class="form-horizontal" action="tcambioServices.html" method="POST" id="modform">
                         
                            	<input type="hidden" name="m_codtc" id="m_codtc">
                     <div class="form-group">
                            <label class="control-label col-xs-4">Tipo de Cambio::</label>
                            <div class="col-xs-6">
                                <input type="text" class="form-control" name="m_tc" id="m_tc" placeholder="Tipo de Cambio.." required>
                            </div>
                            
                        </div>
                       
                         <div class="form-group">
                            <label class="control-label col-xs-4">Fecha de Adicion.::</label>
                            <div class="col-xs-6">
                                <input type="text" class="form-control" name="m_fecha" id="m_fecha" placeholder="dd/mm/aaaa" required>
                            </div>
                        </div>
                                <input type="hidden" name="opcion" value="${opMod}" >
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnAcept_mod">Modificar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Modals MODIFICAR-MODAL-->

<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!--  Modals ELIMINAR-->
<div class="panel-body">
    <div class="modal fade" id="delModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
    
        <br><br><br>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabl">Seguro de Eliminar ACCION?</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" action="tcambioServices.html" method="POST" id="delform">
		                <div class="form-group">
		                    <label class="control-label col-xs-4">Nro. Acción::</label>
		                    <div class="col-xs-3">
		                        <input type="text" class="form-control" name="b_nro" id="b_nro" disabled>
		                    </div>	                        
		                </div>
		                <div class="form-group">
		                    <label class="control-label col-xs-4">Socio:: </label>
		                    <div class="col-xs-8">
	                          	<input type="text" class="form-control" id="b_codper" disabled>
	                            <input type="HIDDEN" name="b_codperVal" id="b_codperVal" >	                            
		                    </div> 	                        
		                </div>	                    
		                <div class="form-group">
		                    <label class="control-label col-xs-4">Monto Acción::</label>
		                    <div class="col-xs-3">
		                        <input type="text" class="form-control" name="b_monto" id="b_monto" disabled>
		                    </div>	                        
		                </div>
		                <div class="form-group">
		                    <label class="control-label col-xs-4">Saldo a Pagar::</label>
		                    <div class="col-xs-3">
		                        <input type="text" class="form-control" name="b_saldo" id="b_saldo" disabled>
		                    </div>	                        
		                </div>
		                
		                <input type="HIDDEN" name="b_coda" id="b_coda" >
                        <input type="hidden" name="opcion" value="${opDel}" >
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnAcept_del">ELIMINAR</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Modals ELIMINAR-->

<!--  Modals XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX  -->
<!--  LISTA DE SOCIOS -->
<div class="panel-body">
    <div class="modal fade" id="listaSocios-Modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
        <br><br><br>
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabl">Seleccione un SOCIO</h4>
                </div>
                <div class="modal-body">
 <!-- MODAL-BODY -->
 <!-- aqui tamaño de tablas  -->               
 <!-- /. ROW  -->              
 <div  class="row">
 
     <!-- aqui tamaño de tablas  -->               
     <div class="col-md-12">
         <!-- Advanced Tables -->
         <div  class="panel panel-default">
             <div >
                 <div class="espacio-small"></div>
                 <div class="table-responsive">
<div id="listaSocios">

</div>                    
                 </div>                 
             </div>
         </div>
         <!--End Advanced Tables -->

     </div>
     <input type="HIDDEN" id="selected-row" value="0">
 </div>
 <!--End Advanced Tables -->            
 <!-- MODAL-BODY -->                
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Modals LISTA SOCIOS -->

<!-- XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX -->
<!--  Modals ELIMINAR-->
<div class="panel-body">
    <div class="modal fade" id="habModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
    
        <br><br><br>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabl">Seguro de Habilitar El Tipo de Cambio?</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" action="tcambioServices.html" method="POST" id="habform">
                        <div class="form-group">
                            <label class="control-label col-xs-3">Tipo de Cambio::</label>
                            <div class="col-xs-9">
                            	<input type="hidden" name="h_codtc" id="h_codtc">
                                <input type="text" class="form-control" name="h_tc" id="h_tc" disabled>
                            </div>
                        </div>
                        
                        <input type="hidden" name="opcion" value="${opHab}" >
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnAcept_hab">Confirmar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Modals ELIMINAR-->


<!-- End Modals -->

     <!-- /. WRAPPER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
<!-- OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO -->   
<script>

//DETALLE DE ACCIONES OAM
function llamarDetalleAccion(xcoda,xnombre){
	//alert("llegoo..."+xnombres);
	$('#detalle-pagos').show();
	jQuery.post('detalle_Accion_104.html',{xcoda:xcoda,xnombre:xnombre},
		function(data){$('#detalle-accion').html(data);}
	);
}

//LISTA DE SOCIO 
function listaSocios(xfila){
	$('#listaSocios-Modal').modal('show');	

	jQuery.post('listaSocios_104.html',{},
			function(data){$('#listaSocios').html(data);}
	);
}

//FUNCION CUANDO SE SELECCIONADO UN SOCIO
function filaSeleccionado_socio(xcodigoper,xcodper,xsocio){	
		$("#a_codper").val(xsocio);
		$("#a_codperVal").val(xcodper);		
		$("#a_nro").val(xcodigoper);
		
		$("#a_nro" ).prop( "disabled", false );
		$("#a_1").prop("checked", true);
		$("#a_editado").val(xcodigoper);
		$("#a_sw").val("1");
		//OCULTA LA VENTANA DE PRODUCTOS, MARCAS
		$('#listaSocios-Modal').modal('hide');
}

//SI CAMBIA GENERADOR DE CODIGO ACCION 
$(".paramsAccion").change( function() {
	var xaccion=$('input[name=a_eaccion]:checked').val();
	if (xaccion == '1'){
		$("#a_nro" ).prop( "disabled", false );
		var xnro=$("#a_editado").val();
		$("#a_nro").val(xnro);
		$("#a_sw").val("1");
	}else {
		
		jQuery.post('extrae_Accion_104.html', 	 						
					function(data){		 	 					
						obj = JSON.parse(data);
						//alert(obj.xnroaccion);
						$("#a_nro").val(obj.xnroaccion);
			        } //end of function (data)
		); //END of first ajax
		
		$("#a_nro" ).prop( "disabled", true );
		$("#a_sw").val("2");
	}
});

//ADICIONAR NUEVA ACCION
function adicionarAccion(){
	$("#a_codperVal").val("");
	$("#a_codper").val("");
	$("#a_nro").val("");
	$("#a_monto").val("");
	$("#a_obser").val("");
	$("#a_anioini").val("");
	
	$("#a_interes").val("");
	$("#a_nrocuota").val("");
	$("#a_cuota").val("");
	$("#a_montotal").val("");
	$("#a_montot").val("");
	
	$("#a_nro" ).prop( "disabled", false );
	$("#a_1").prop("checked", true);
	
	$('#myModal-add').modal('show');	
}

function modificarTcambio(xcodtc, xtc,xfecha){
	$('#m_codtc').val(xcodtc);
	$('#m_tc').val(xtc);
	$('#m_fecha').val(xfecha);
	
	$('#modModal').modal('show');	
}

//
function eliminarAcciones(xcoda,xnro,xsocio,xmonto,xsaldo){
	//alert(xcoda);
	$('#b_coda').val(xcoda);
	$('#b_nro').val(xnro);
	$('#b_codper').val(xsocio);
	$('#b_monto').val(xmonto);
	$('#b_saldo').val(xsaldo);
	
	$("#btnAcept_del").prop('disabled', false);//activando boton
	$('#delModal').modal('show');
}

function habilitarTcambio(xcodtc, xtc){
	$('#h_codtc').val(xcodtc);
	$('#h_tc').val(xtc);
	$('#habModal').modal('show');
}    

$(document).ready(function () {

    	$("#a_fecha").datepicker("option", "dateFormat", "dd/mm/yy" ).datepicker("setDate", ${xfecha});
    	$("#m_fecha").datepicker("option", "dateFormat", "dd/mm/yy" ).val();
    	
         $('#dataTables-example').dataTable();
         
         //Devuelve los mensajes de guardado
         if ($('#mensaje').val() != '0'){
        	 if ($('#mensaje').val() == '1'){
        	 	$.notify($('#menTexto').val(), "success",{ position:"center middle" });
        	 }
        	 if ($('#mensaje').val() == '2'){
         	 	$.notify($('#menTexto').val(), "error",{ position:"center middle" });
         	 }
         }
         
         //limpia los datos del modal al momento de ingresar
        $('#myModal').on('hidden.bs.modal', function(){ 
     		$(this).find('form')[0].reset(); //para borrar todos los datos que tenga los input, textareas, select.
     	}); 
        
         //SI OCURRE CAMBIO 
        $(".paramsChange").change( function() {
			var xestado=$('input[name=estado]:checked').val();
			var xsaldo=$('input[name=saldo]:checked').val();
			jQuery.post('listaAcciones_det_104.html',{xestado:xestado,xsaldo:xsaldo},
						function(data){	$('#listacciones-det').html(data);
			});
			
        }); 
        
         //ANULA TECLA ENTER PARA LOS INPUTS
        $("input").keypress(function(e) {
            if (e.which == 13) {
                return false;
            }
        });
        
      //Butons ACEPTAR   
 		$("#generar_costos").click(function(){		
 			var xsw=validarCalculos();
        });
        
        //Butons ACEPTAR   
 		$("#btnAcept_add").click(function(){
 			var xestado=$('input[name=estado]:checked').val();
 			var xsaldo=$('input[name=saldo]:checked').val();
 			$('#detalle-accion').empty();
 			
 			if (validarCalculos() == 0) {
		 			if (validarDatos_add() == 0) {
			 			if(confirm('¿Seguro de Guardar LA ACCION ?')){ 				
				 				$.when(	
					 	 				jQuery.post('accionServices_104.html',$('#addform').serialize(), 	 						
					 	 						function(data){		 	 					
					 	 							obj = JSON.parse(data);
					 								//alert(obj.error);
					 								if (obj.error=='0'){
					 									//repetir(xdatos) 									
					 									menOK('Correcto..!','Los Datos se <b>GUARDARON satisfactoriamente</b>..!');
					 									//alert("OK");
					 									$('#myModal-add').modal('hide');
					 									
					 								}else{
					 									if (obj.error=='1'){
					 										menError('Error..!', 'EL < NRO ACCION > ESTA REPETIDO..Revisar.!');
					 									}else{
					 										menError('Error..!', 'NO SE PUDO GUARDAR LOS DATOS, PUEDE QUE EL NRO. ACCION ESTE REPETIDO..Revisar.!');
					 									}	
					 							    }
					 	 				        } //end of function (data)
					 	 				) //END of first ajax
									).then(function() {	
										jQuery.post('listaAcciones_det_104.html',{xestado:xestado,xsaldo:xsaldo},
						 	 						function(data){	$('#listacciones-det').html(data);
						 	 			});
									});						
			 			}
		 			}//validar datos
 			}//validar calcular		
        });	
       
 		//Butons MODIFICAR
 		$("#btnAcept_mod").click(function(){
 			var xestado=$('input[name=estado]:checked').val();
 			
 			if (validarDatos_mod() == 0) {
 					if(confirm('¿Seguro de Modificar El Tipo de Cambio ?')){ 				
	 						$.when(	
				 	 				jQuery.post('tcambioServices.html',$('#modform').serialize(), 	 						
				 	 						function(data){		 	 					
				 	 							obj = JSON.parse(data);
				 								//alert(obj.error);
				 								if (obj.error=='0'){
				 									//repetir(xdatos) 									
				 									menOK('Correcto..!','Los Datos se <b>MODIFICARON satisfactoriamente</b>..!');
				 									//alert("OK");
				 									$('#modModal').modal('hide');			 									
				 								}else{
				 										menError('Error..!', 'NO SE PUDO MODIFICAR LOS DATOS..Revisar.!');
				 							    }
				 	 				        } //end of function (data)
				 	 				) //END of first ajax
							).then(function() {	
				 	 		//		alert(xcodpadre+" -a ver- "+xestado);
									jQuery.post('listaTcambio_det_10.html',{xestado:xestado},
					 	 						function(data){	$('#listcambio-det').html(data);
					 	 			});
							});
 					}
 			}
 		});
 		
 		//desactivando el doble click
 		$('#btnAcept_del').dblclick(function(e){
 			    e.preventDefault();
 		});
 		//Butons ELIMINAR
 		$("#btnAcept_del").click(function(){
 			$("#btnAcept_del").prop('disabled', true);
 			var xestado=$('input[name=estado]:checked').val();
 			var xsaldo=$('input[name=saldo]:checked').val();
				$.when(	
	 	 				jQuery.post('accionServices_104.html',$('#delform').serialize(), 	 						
	 	 						function(data){		 	 					
	 	 							obj = JSON.parse(data);
	 								//alert(obj.error);
	 								if (obj.error=='0'){
	 									//repetir(xdatos) 									
	 									menOK('Correcto..!','Los Datos se <b>ELIMINARON satisfactoriamente</b>..!');
	 									//alert("OK");
	 									$('#delModal').modal('hide');			 									
	 								}else{
	 									if (obj.error=='1'){
	 										menError('Error..!', 'NO SE PUDO ELIMINAR LOS DATOS..Revisar.!');
	 									}
	 									if (obj.error=='2'){
	 										menError('Error..!', 'EXISTEN DATOS QUE DEPENDEN DE ESTA ACCION..Revisar.!');
	 									}
	 							    }
	 	 				        } //end of function (data)
	 	 				) //END of first ajax
				).then(function() {	
					jQuery.post('listaAcciones_det_104.html',{xestado:xestado,xsaldo:xsaldo},
 						function(data){	$('#listacciones-det').html(data);
					});
				});
 		});
 		
 		//Butons HABILITAR
 		$("#btnAcept_hab").click(function(){
 			var xestado=$('input[name=estado]:checked').val();
	 			$.when(	
	 	 				jQuery.post('tcambioServices.html',$('#habform').serialize(), 	 						
	 	 						function(data){		 	 					
	 	 							obj = JSON.parse(data);
	 								//alert(obj.error);
	 								if (obj.error=='0'){
	 									//repetir(xdatos) 									
	 									menOK('Correcto..!','Los Datos se <b>HABILITARON satisfactoriamente</b>..!');
	 									//alert("OK");
	 									$('#habModal').modal('hide');			 									
	 								}else{
	 										menError('Error..!', 'NO SE PUDO <b>HABILITAR</b> LOS DATOS..Revisar.!');
	 							    }
	 	 				        } //end of function (data)
	 	 				) //END of first ajax
				).then(function() {	
	 	 		//		alert(xcodpadre+" -a ver- "+xestado);
						jQuery.post('listaTcambio_det_10.html',{xestado:xestado},
		 	 						function(data){	$('#listcambio-det').html(data);
		 	 			});
				});
 		});
 		
 		//VALIDAR BOTON GENERAR
 		function validarCalculos(){
 			var sw=0;
 			
 			var xmonto=$('#a_monto').val();
 			var xinteres=$('#a_interes').val();
 			var xnrocuota=$('#a_nrocuota').val();
 			var xcuota=$('#a_cuota').val();
 			
 			if ((/^([0-9])*[.]?[0-9]*$/.test(xmonto))&&(xmonto != '')&&(parseFloat(xmonto) > 0)){
 				if ((/^([0-9])*[.]?[0-9]*$/.test(xinteres))&&(xinteres != '')){
 					if ((!isNaN(xnrocuota))&&(xnrocuota != '')){
 						if ((parseInt(xnrocuota)>0)&&(parseInt(xnrocuota)<25)){
 							if ((!isNaN(xcuota))&&(xcuota != '')){
 								if ((parseInt(xcuota)>=0)&&(parseInt(xcuota)<=parseFloat(xmonto))){
 									if (xinteres == 0){  //CALCULA EN BASE AL INTERES
 										var zinteres=(((xcuota*xnrocuota) * 100) / xmonto) - 100; 										
 										var zmontotal=parseFloat(xmonto)+parseFloat((xmonto * (zinteres / 100)));
 										//alert(zinteres+" - "+zmontotal);
 										$("#a_interes").val(zinteres);
 										$("#a_montot").val(zmontotal);
 										$("#a_montotal").val(zmontotal);
 									}else{  //CALCULA EN  BASE AL NRO DE CUOTAS
 										var zmontotal=parseFloat(xmonto)+parseFloat((xmonto * (xinteres / 100)));
 										var zcuota=zmontotal / parseInt(xnrocuota);
 										$("#a_cuota").val(zcuota);
 										$("#a_montot").val(zmontotal);
 										$("#a_montotal").val(zmontotal);
 									}
 									sw=0;
 								}else{
 	 	 	 	 	 				sw=1;
 	 	 	 	 	 				menError('Error..!', '<B>LA CUOTA NO SER MAYOR AL MONTO</B>..!');
 	 	 	 	 					$('#a_cuota').focus();
 	 	 	 	 				}
 							}else{
 	 	 	 	 				sw=1;
 	 	 	 	 				menError('Error..!', '<B>LA CUOTA NO ES VALIDO</B>..!');
 	 	 	 					$('#a_cuota').focus();
 	 	 	 				}
 						}else{
 	 	 	 				sw=1;
 	 	 	 				menError('Error..!', '<B>EL NRO. DE CUOTA DEBE ESTAR ENTRE [1.24]</B>..!');
 	 	 					$('#a_nrocuota').focus();
 	 	 				}
 					}else{
 	 	 				sw=1;
 	 	 				menError('Error..!', '<B>EL NRO. DE CUOTA NO ES VALIDO</B>..!');
 	 					$('#a_nrocuota').focus();
 	 				}
 				}else{
 	 				sw=1;
 	 				menError('Error..!', '<B>EL INTERES PUEDE SER CERO PERO NO VACIO</B>..!');
 					$('#a_interes').focus();
 				}
 			}else{
 				sw=1;
 				menError('Error..!', '<B>EL DATO -MONTO- NO ES VALIDO</B>..!');
				$('#a_monto').focus();
			}
 			
 			return sw;
 		}
 		
 		//VALIDA GUARDAR ADD ACCION 		
 		function validarDatos_add(){
 			var sw=0;
 			var xfecha=$('#a_fecha').val();
 			
 			var xnro=$('#a_nro').val();
 			var xnro2=$.trim(xnro);
 			if (xnro2 != xnro) {
				$('#a_nro').val(xnro2);
				xnro=xnro2;
			}
 			
 			var xcodper=$('#a_codper').val();
 			
 			var xmonto=$('#a_monto').val();
 			var xmonto2=$.trim(xmonto);
 			if (xmonto2 != xmonto) {
				$('#a_monto').val(xmonto2);
				xmonto=xmonto2;
			}
/* 			
 			var xanio=$('#a_anioini').val();
 			var xanio2=$.trim(xmonto);
 			if (xmonto2 != xmonto) {
				$('#a_anioini').val(xanio2);
				xanio=xanio2;
			}
*/ 			
 			
 			if (validaFechaDDMMAAAA(xfecha)){
 				if (xnro != ''){
 					if (xcodper != ''){
		 					if ((/^([0-9])*[.]?[0-9]*$/.test(xmonto))&&(xmonto != '')&&(parseFloat(xmonto) > 0)){
		 						sw=0;
/*		 						
		 						if ((!isNaN(xanio))&&(xanio != '')&&((parseFloat(xanio) > 2017)and((parseFloat(xanio) < 2040)){
		 							sw=0;	
		 						}else{
			 	 					sw=1;
			 	 		 			menError('Error..!', '<B>EL DATO -ANIO- NO ES VALIDO</B>..!');
			 	 					$('#a_anioini').focus();
			 	 				}
*/			 	 					
		 					}else{
		 	 					sw=1;
		 	 		 			menError('Error..!', '<B>EL DATO -MONTO- NO ES VALIDO</B>..!');
		 	 					$('#a_monto').focus();
		 	 				}
 					}else{
 	 					sw=1;
 	 		 			menError('Error..!', '<B>DEBE SELECCIONAR UN SOCIO</B>..!');
 	 					$('#a_codper').focus();
 	 				}		
 				}else{
 					sw=1;
 		 			menError('Error..!', '<B>EL DATO NRO. ACCION NO ES VALIDO</B>..!');
 					$('#a_nro').focus();
 				}
			}else{
				sw=1;
	 			menError('Error..!', 'La <B>LA FECHA NO ES VALIDO</B> Ejem: dia/mes/año..!');
				$('#a_fecha').focus();
			}
 				
 			return sw;
 		}
		
		
 		//validar solo para opcion modificar
 		function validarDatos_mod(){
 			var sw=0;
 			var tc=$('#m_tc').val();
 			
 			var xfecha=$('#m_fecha').val();
 			
 			var xtc=$.trim(tc);
 			if (xtc != tc) {
				$('#m_tc').val(xtc);
				tc=xtc;
			}			
			
 					
					if (tc != ""){
						if (!isNaN(tc)){
							if (validaFechaDDMMAAAA(xfecha)){
								sw=0;	
							}else{
								sw=1;
					 			menError('Error..!', 'La </B>LA FECHA </B> debe ser dia/mes/año..!');
									$('#m_fecha').focus();
							}
						}else{
							sw=1;
					 		menError('Error..!', '<B>Tipo de Cambio</B> debe tener un valor NUMERICO..!');
					 		$('#m_tc').focus();
						}			
					}else{
						sw=1;
				 		menError('Error..!', 'El Dato </B>Tipo de Cambio</B> no puede ser vacio..!');
				 		$('#m_tc').focus();
					}
 				
 			
 			return sw;
 		}
 		
 		//Butons PRINT
 		$("#print").click(function(){
 			window.open('tcambioReportes01.html','win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=825,height=550,directories=no,location=no');
        });
    });
</script>